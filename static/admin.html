<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8"/>
  <title>Beheer | Wine Advisor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/static/styles.css"/>
  <style>
    :root { --brand:#121B39; --accent:#4BAA9E; }
    body { background:#f8fafc; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .tabs { display:flex; gap:6px; flex-wrap:wrap; margin-bottom:12px; }
    .tab { padding:10px 14px; border:1px solid #e5e7eb; border-bottom:none; border-radius:10px 10px 0 0; background:#f1f5f9; cursor:pointer; }
    .tab.active { background:#fff; border-color:#cbd5e1; color:var(--brand); font-weight:600; }
    .panel { border:1px solid #cbd5e1; border-radius:0 10px 10px 10px; background:#fff; padding:16px; }
    .card { border:1px solid #e5e7eb; border-radius:10px; padding:16px; background:#fff; margin: 12px 0; }
    .stack { display:flex; flex-direction:column; gap:12px; }
    .field { display:flex; flex-direction:column; gap:6px; }
    .field input, .field select, .field textarea { padding:10px; border:1px solid #ddd; border-radius:8px; font-size:14px; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .row-3 { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px; }
    .row-4 { display:grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap:12px; }
    .actions { display:flex; gap:10px; flex-wrap:wrap; }
    .btn { padding:10px 14px; border:1px solid #ccc; background:#fff; border-radius:8px; cursor:pointer; }
    .btn.primary { background:var(--brand); color:#fff; border-color:var(--brand); }
    .btn.secondary { background:var(--accent); color:#fff; border-color:var(--accent); }
    .btn.ghost { background:#fff; }
    .muted { color:#666; font-size:12px; }
    .sliders { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .sliders label { font-size:12px; color:#555; display:flex; justify-content:space-between; }
    input[type="range"] { width:100%; }
    .grapes { display:flex; flex-direction:column; gap:8px; }
    .grape-row { display:grid; grid-template-columns: 3fr 1fr auto; gap:8px; align-items:center; }
    .pill { display:inline-block; padding:4px 8px; background:#f1f5f9; border-radius:999px; font-size:12px; }
    .error { color:#b91c1c; }
    .ok { color:#0f766e; }
    .sources a { color:#0f766e; }
    table { width:100%; border-collapse: collapse; }
    th, td { padding:8px; border-bottom:1px solid #e5e7eb; text-align:left; }
    th { background:#f8fafc; font-weight:600; }
    tr:hover { background:#f9fafb; }
    @media (max-width: 820px) {
      .row, .row-3, .row-4, .sliders, .grape-row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header class="wrap">
    <h1>Beheer</h1>
    <p class="muted">Tab 1: Wijn toevoegen · Tab 2: Voorraad · Tab 3: Bewerken (via klik op een wijn)</p>
  </header>

  <main class="wrap">
    <div class="tabs">
      <button class="tab active" data-tab="tab-add">Wijn toevoegen</button>
      <button class="tab" data-tab="tab-stock">Voorraad</button>
      <button class="tab" data-tab="tab-edit" disabled>Bewerken</button>
    </div>

    <section id="tab-add" class="panel">
      <section class="card stack">
        <h2>1) Basisgegevens</h2>
        <div class="row-3">
          <div class="field">
            <label>Naam</label>
            <input id="name" placeholder="Bijv. Bourgogne Chardonnay 2022"/>
          </div>
          <div class="field">
            <label>Producent (optioneel)</label>
            <input id="producer" placeholder="Domein / huis"/>
          </div>
          <div class="field">
            <label>Kleur</label>
            <select id="color">
              <option value="">(kies)</option>
              <option>Wit</option>
              <option>Rood</option>
              <option>Rosé</option>
              <option>Mousserend</option>
              <option>Oranje</option>
              <option>Versterkt</option>
            </select>
          </div>
        </div>

        <div class="row-4">
          <div class="field">
            <label>Zoetheid</label>
            <select id="sweetness">
              <option value="dry">Droog</option>
              <option value="off-dry">Halfdroog</option>
              <option value="medium-sweet">Medium zoet</option>
              <option value="sweet">Zoet</option>
            </select>
          </div>
          <div class="field">
            <label>Jaargang</label>
            <input id="vintage" type="number" placeholder="2021"/>
          </div>
          <div class="field">
            <label>ABV (%)</label>
            <input id="abv" type="number" step="0.1" placeholder="13.0"/>
          </div>
          <div class="field">
            <label>Inkoopprijs (€)</label>
            <input id="purchase_price" type="number" step="0.01" placeholder="19.95"/>
          </div>
        </div>

        <div class="row-3">
          <div class="field">
            <label>Land</label>
            <select id="country"></select>
          </div>
          <div class="field">
            <label>Regio</label>
            <select id="region"></select>
          </div>
          <div class="field">
            <label>Overige regio (indien ‘Overig’)</label>
            <input id="regionOther" placeholder="Schrijf hier de regio"/>
          </div>
        </div>

        <div class="row-4">
          <div class="field">
            <label>Klimaat</label>
            <select id="climate">
              <option value="cool">cool</option>
              <option value="temperate" selected>temperate</option>
              <option value="warm">warm</option>
            </select>
          </div>
          <div class="field">
            <label>Bodem</label>
            <select id="soil">
              <option value="">(onbekend)</option>
              <option>limestone</option><option>granite</option><option>clay</option>
              <option>sand</option><option>slate</option><option>volcanic</option>
            </select>
          </div>
          <div class="field">
            <label>Houtrijping (maanden)</label>
            <input id="oak" type="number" value="0"/>
          </div>
          <div class="field">
            <label>Élevage</label>
            <input id="elevage" placeholder="oak / stainless / amphora…"/>
          </div>
        </div>

        <div class="row-3">
          <div class="field">
            <label>Aantal flessen</label>
            <input id="bottles" type="number" min="0" step="1" value="1"/>
          </div>
          <div class="field">
            <label>Flesgrootte (ml)</label>
            <input id="bottle_size" type="number" min="187" step="1" value="750"/>
          </div>
          <div class="field">
            <label>Opslaglocatie</label>
            <input id="storage" placeholder="Rek A2 / Kist 3 …"/>
          </div>
        </div>

        <div class="actions">
          <button class="btn secondary" id="btnSuggestWindow">Suggereren drinkvenster</button>
          <span class="muted" id="winMsg"></span>
        </div>

        <div class="row">
          <div class="field">
            <label>Drinkvenster van</label>
            <input id="drink_from" type="number" placeholder="2025"/>
          </div>
          <div class="field">
            <label>Drinkvenster tot</label>
            <input id="drink_to" type="number" placeholder="2030"/>
          </div>
        </div>
      </section>

      <section class="card stack">
        <h2>2) Druiven</h2>
        <div class="muted">Kies uit veelvoorkomende rassen of typ zelf. Gewicht = aandeel in de blend (bijv. 0.6)</div>
        <div class="actions">
          <button class="btn ghost" id="addGrape">Ras toevoegen</button>
          <button class="btn ghost" id="normalize">Normaliseer gewichten (som = 1.0)</button>
        </div>
        <div class="grapes" id="grapes"></div>
      </section>

      <section class="card stack">
        <h2>3) Profiel & verrijking</h2>
        <div class="actions">
          <button class="btn primary" id="btnRule">Auto-profiel (regels)</button>
          <button class="btn secondary" id="btnEnrich">Verrijk online (beta)</button>
        </div>
        <div id="msg" class="muted"></div>

        <div class="sliders">
          <div class="field"><label>ZB (fris↔rijk) <span id="vZB"></span></label><input type="range" id="ZB" min="0" max="100" value="50"></div>
          <div class="field"><label>MG (licht↔vol) <span id="vMG"></span></label><input type="range" id="MG" min="0" max="100" value="50"></div>
          <div class="field"><label>LS (klassiek↔avont.) <span id="vLS"></span></label><input type="range" id="LS" min="0" max="100" value="50"></div>
          <div class="field"><label>PA (haardvuur↔zon) <span id="vPA"></span></label><input type="range" id="PA" min="0" max="100" value="50"></div>
          <div class="field"><label>GF (casual↔gastr.) <span id="vGF"></span></label><input type="range" id="GF" min="0" max="100" value="50"></div>
        </div>

        <div class="field">
          <label>Notities (verrijking)</label>
          <textarea id="notes" placeholder="Samenvatting uit bronnen…"></textarea>
        </div>
        <div class="sources" id="sources"></div>

        <div class="actions">
          <button class="btn primary" id="btnSave">Opslaan</button>
          <span id="saveMsg" class="muted"></span>
        </div>
      </section>
    </section>

    <section id="tab-stock" class="panel" style="display:none;">
      <div class="card stack">
        <h2>Voorraad</h2>
        <div class="row">
          <div class="field">
            <label>Zoeken (naam / regio / druif)</label>
            <input id="searchQ" placeholder="Bijv. Pinot Noir of Bourgogne"/>
          </div>
          <div class="field">
            <label>&nbsp;</label>
            <div class="actions">
              <button class="btn" id="btnSearch">Zoek</button>
              <span class="muted" id="pagInfo"></span>
            </div>
          </div>
        </div>

        <div class="card" style="padding:0; overflow:auto;">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Naam</th>
                <th>Regio</th>
                <th>Jaargang</th>
                <th>Druiven</th>
                <th>Flessen</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="tblBody"></tbody>
          </table>
        </div>

        <div class="actions">
          <button class="btn" id="prevPage">Vorige</button>
          <button class="btn" id="nextPage">Volgende</button>
        </div>
      </div>
    </section>

    <section id="tab-edit" class="panel" style="display:none;">
      <p class="muted">Open het bewerken-scherm via de voorraadlijst: klik op de naam (link). Je komt dan in <code>/admin/wine/&lt;id&gt;</code> met tabjes: Basis / Voorraad / Druiven / Profiel / Pairing en autosave per veld.</p>
      <div class="actions">
        <a class="btn" href="/admin">Terug naar start</a>
      </div>
    </section>
  </main>

  <script src="/static/admin.js"></script>
</body>
</html>
